knitr::opts_chunk$set(echo = TRUE)
dat = st_read("C:\Penn\Water Center\Chesco_Data\Avondale_cleaned.csv")
dat = st_read("data\Avondale_cleaned.csv")
dat = st_read("data/Avondale_cleaned.csv")
library(sf)
library(tidyverse)
library(tidycensus)
library(tigris)
census_api_key("e13d5be5cb48d927009e0dca0af99d21918d514f", overwrite = TRUE)
options(scipen = 999)
dat = st_read("data/Avondale_cleaned.csv")
dat = read_csv("data/Avondale_cleaned.csv")
View(dat)
dat = read_csv("data/Avondale_cleaned.csv") %>%
filter(PROPERTY_CLASS == "A" | PROPERTY_CLASS == "R")
dat = read_csv("data/Avondale_cleaned.csv") %>%
filter(PROPERTY_CLASS == "A" | PROPERTY_CLASS == "R") %>%
filter(WATER == 1)
points <- st_as_sf(dat, coords = c(X_CO, Y_CO), crs = "EPSG:2272")
points <- st_as_sf(dat, coords = c(dat$X_CO, dat$Y_CO), crs = "EPSG:2272")
points <- st_as_sf(dat, coords = c("X_CO", "Y_CO"), crs = "EPSG:2272")
points <- st_as_sf(dat, coords = c("X_CO", "Y_CO"), crs = "EPSG:2272")
codes <- c("R-10", "R-20", "R-30", "R-40", "R-50", "R-55", "R-60", "R-61", "R-90")
dat <- read_csv("data/Avondale_cleaned.csv") %>%
filter(LUC %in% codes) %>%
filter(WATER == 1)
points <- st_as_sf(dat, coords = c("X_CO", "Y_CO"), crs = "EPSG:2272")
plot(points)
View(points)
dat <- read_csv("data/Avondale_cleaned.csv") %>%
dplyr::filter(LUC %in% codes) %>%
dplyr::filter(WATER == 1) %>%
select(PARID, LUC, Water, YRBLT, COMM_YRBLT, X_CO, Y_CO, situs)
dat <- read_csv("data/Avondale_cleaned.csv") %>%
dplyr::filter(LUC %in% codes) %>%
dplyr::filter(WATER == 1) %>%
select(PARID, LUC, WATER, YRBLT, COMM_YRBLT, X_CO, Y_CO, situs)
points <- st_as_sf(dat, coords = c("X_CO", "Y_CO"), crs = "EPSG:2272")
install.packages("basemaps")
install.packages("leaflet")
library(leaflet)
leaflet() %>% setView(lng = -71.0589, lat = 42.3601, zoom = 12)
m %>% addTiles()
m <- leaflet() %>% setView(lng = -71.0589, lat = 42.3601, zoom = 12)
m %>% addTiles()
leaflet(dat) %>% addTiles() %>%
addCircleMarkers(lng = ~X_CO, lat = ~Y_CO,
popup = ~situs)
leaflet(dat) %>% addTiles() %>%
addCircleMarkers(lng = X_CO, lat = Y_CO,
popup = ~situs)
leaflet(dat) %>% addTiles() %>%
addCircleMarkers(lng = dat$X_CO, lat = dat$Y_CO, popup = dat$situs)
leaflet() %>%
addProviderTiles(providers$CartoDB.Positron) %>%
setView(lng = -79.384293,
lat = 43.685,
zoom = 11) %>%
addCircles(data = dat)
leaflet() %>%
addProviderTiles(providers$CartoDB.Positron) %>%
setView(lng = -79.384293,
lat = 43.685,
zoom = 11) %>%
addCircles(data = points)
points <- st_as_sf(dat, coords = c("X_CO", "Y_CO"), crs = "EPSG:2272") %>%
st_transform(crs="EPSG:4326")
leaflet() %>%
addProviderTiles(providers$CartoDB.Positron) %>%
setView(lng = -79.384293,
lat = 43.685,
zoom = 11) %>%
addCircles(data = points)
leaflet() %>%
addProviderTiles(providers$CartoDB.Positron) %>%
setView(lng = -79.384293,
lat = 43.685,
zoom = 11) %>%
addCircleMarkers(data = points)
leaflet() %>%
addProviderTiles(providers$CartoDB.Positron) %>%
setView(lng = -79.384293,
lat = 43.685,
zoom = 11) %>%
addCircleMarkers(data = points,
radius = 1,
opacity = 1)
pa_counties <- counties(state = 42)
View(pa_counties)
pa_counties <- counties(state = 42) %>%
dplyr::filter(NAME == "Chester")
chester <- counties(state = 42) %>%
dplyr::filter(NAME == "Chester")
plot(chester)
municipalities <- county_subdivisions(pa, county = "Chester")
municipalities <- county_subdivisions(42, county = "Chester")
View(municipalities)
name <- "Avondale"
town <- municipalities %>%
dplyr::filter(NAME == name)
View(town)
leaflet() %>%
addProviderTiles(providers$CartoDB.Positron) %>%
setView(lng = town$INTPTLON,
lat = town$INTPTLAT,
zoom = 11) %>%
addCircleMarkers(data = points,
radius = 1,
opacity = 1)
leaflet() %>%
addProviderTiles(providers$CartoDB.Positron) %>%
setView(lng = town$INTPTLON,
lat = town$INTPTLAT,
zoom = 5) %>%
addCircleMarkers(data = points,
radius = 1,
opacity = 1)
leaflet() %>%
addProviderTiles(providers$CartoDB.Positron) %>%
setView(lng = town$INTPTLON,
lat = town$INTPTLAT,
zoom = 20) %>%
addCircleMarkers(data = points,
radius = 1,
opacity = 1)
leaflet() %>%
addProviderTiles(providers$CartoDB.Positron) %>%
setView(lng = town$INTPTLON,
lat = town$INTPTLAT,
zoom = 15) %>%
addCircleMarkers(data = points,
radius = 1,
opacity = 1)
leaflet() %>%
addProviderTiles(providers$CartoDB.Positron) %>%
setView(lng = town$INTPTLON,
lat = town$INTPTLAT,
zoom = 16) %>%
addCircleMarkers(data = points,
radius = 1,
opacity = 1)
leaflet() %>%
addProviderTiles(providers$CartoDB.Positron) %>%
setView(lng = town$INTPTLON,
lat = town$INTPTLAT,
zoom = 15) %>%
addCircleMarkers(data = points,
radius = 1,
opacity = 1)
leaflet() %>%
addProviderTiles(providers$CartoDB.Positron) %>%
setView(lng = town$INTPTLON,
lat = town$INTPTLAT,
zoom = 15) %>%
addCircleMarkers(data = points,
radius = 1,
opacity = 1,
popup = popup)
leaflet() %>%
addProviderTiles(providers$CartoDB.Positron) %>%
setView(lng = town$INTPTLON,
lat = town$INTPTLAT,
zoom = 15) %>%
addCircleMarkers(data = points,
radius = 1,
opacity = 1,
popup = "A")
leaflet() %>%
addProviderTiles(providers$CartoDB.Positron) %>%
setView(lng = town$INTPTLON,
lat = town$INTPTLAT,
zoom = 15) %>%
addCircleMarkers(data = points,
radius = 1,
opacity = 1,
popup = "situs")
leaflet() %>%
addProviderTiles(providers$CartoDB.Positron) %>%
setView(lng = town$INTPTLON,
lat = town$INTPTLAT,
zoom = 15) %>%
addCircleMarkers(data = points,
radius = 1,
opacity = 1,
popup = situs)
leaflet() %>%
addProviderTiles(providers$CartoDB.Positron) %>%
setView(lng = town$INTPTLON,
lat = town$INTPTLAT,
zoom = 15) %>%
addCircleMarkers(data = points,
radius = 1,
opacity = 1,
popup = points$situs)
leaflet() %>%
addProviderTiles(providers$CartoDB.Positron) %>%
setView(lng = town$INTPTLON,
lat = town$INTPTLAT,
zoom = 15) %>%
addCircleMarkers(data = points,
radius = 1,
opacity = 1,
popup = points$situs) %>%
addPolygons(data = town)
leaflet() %>%
addProviderTiles(providers$CartoDB.Positron) %>%
setView(lng = town$INTPTLON,
lat = town$INTPTLAT,
zoom = 15) %>%
addCircleMarkers(data = points,
radius = 1,
opacity = 1,
popup = points$situs) %>%
addPolygons(data = town,
opacity = .7,
fillOpacity = .2,
weight = .5)
leaflet() %>%
addProviderTiles(providers$CartoDB.Positron) %>%
setView(lng = town$INTPTLON,
lat = town$INTPTLAT,
zoom = 15) %>%
addCircleMarkers(data = points,
radius = 1,
opacity = 1,
popup = points$situs) %>%
addPolygons(data = town,
opacity = .7,
fillOpacity = .2,
leaflet() %>%
addProviderTiles(providers$CartoDB.Positron) %>%
setView(lng = town$INTPTLON,
lat = town$INTPTLAT,
zoom = 15) %>%
addCircleMarkers(data = points,
radius = 1,
opacity = 1,
popup = points$situs) %>%
addPolygons(data = town,
opacity = .7,
fillOpacity = .2)
leaflet() %>%
addProviderTiles(providers$CartoDB.Positron) %>%
setView(lng = town$INTPTLON,
lat = town$INTPTLAT,
zoom = 15) %>%
addCircleMarkers(data = points,
radius = 1,
opacity = 1,
popup = points$situs) %>%
addPolygons(data = town,
opacity = .5,
fillOpacity = .1)
leaflet() %>%
addProviderTiles(providers$CartoDB.Positron) %>%
setView(lng = town$INTPTLON,
lat = town$INTPTLAT,
zoom = 15) %>%
addCircleMarkers(data = points,
radius = 1,
opacity = 1,
popup = points$situs) %>%
addPolygons(data = town,
opacity = .5,
fillOpacity = .05)
leaflet() %>%
addProviderTiles(providers$CartoDB.Positron) %>%
setView(lng = town$INTPTLON,
lat = town$INTPTLAT,
zoom = 15) %>%
addCircleMarkers(data = points,
radius = .8,
opacity = .8,
popup = points$situs) %>%
addPolygons(data = town,
opacity = .5,
fillOpacity = .05)
leaflet() %>%
addProviderTiles(providers$CartoDB.Positron) %>%
setView(lng = town$INTPTLON,
lat = town$INTPTLAT,
zoom = 15) %>%
addPolygons(data = town,
opacity = .5,
fillOpacity = .05) %>%
addCircleMarkers(data = points,
radius = .8,
opacity = .8,
popup = points$situs)
pal <- colorNumeric(palette = c("green", "red"), domain = points$LUC)
